import{a as i}from"./axios-zw96FDk0.js";import{C as c}from"./index-9pddSbbk.js";const a=new c,r=a.get("adminAccessToken"),u="/",n=i.create({baseURL:u,withCredentials:!0});n.interceptors.request.use(e=>r?(e.headers.Authorization=`Bearer ${r}`,e):new Promise(s=>{const t=setInterval(()=>{const o=a.get("adminAccessToken");o&&(clearInterval(t),e.headers.Authorization=`Bearer ${o}`,s(e))},100)}));n.interceptors.response.use(e=>e,async e=>{const s=e.config;if(e.response.status===401&&e.config&&!s._isRetry){s._isRetry=!0;try{const t=await i.get("http://216.250.11.9:5005/api/admin/auth/refresh",{withCredentials:!0});return e.response.config.headers&&(e.response.config.headers.Authorization=t.data.accessToken),a.set("adminAccessToken",t.data.accessToken),n.request(s)}catch{console.log("НЕ АВТОРИЗОВАН")}}throw e});export{n as $};
